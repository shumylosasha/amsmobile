<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="AMS Mobile">
    <meta name="theme-color" content="#3B82F6">
    <meta name="description" content="AMS Mobile Procurement App">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <title>AMS Mobile</title>
    <!-- Add Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Optional: Add custom Tailwind configuration if needed -->
    <script>
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                'light-blue-bg': '#E2EAEE',
                'header-icon': '#9CA3AF',
                'section-title': '#374151',
                'section-subtitle': '#6B7280',
                'nav-active-icon': '#004E70',
                'nav-passive-icon': '#7EAABD',
                'nav-text': '#00374F',
                'nav-gradient-base': '#D9E7EE',
              },
              boxShadow: {
                 'bottom-card': '0 -2px 10px -5px rgba(0, 0, 0, 0.1)',
                 'nav-gradient': '0 -10px 20px -5px rgba(226, 234, 238, 0.7)',
              }
            }
          }
        }
      </script>
    <!-- Add styles for animation -->
    <style>
        @keyframes pulse-speech {
            0%, 100% {
                transform: scale(1);
                opacity: 0.5;
            }
            50% {
                transform: scale(1.05);
                opacity: 0.7;
            }
        }
        .circle-animating {
            animation: pulse-speech 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        /* Modal Animation */
        #fab-modal {
            display: none;
        }
        #fab-modal:not(.hidden) {
            display: flex;
        }
        #fab-modal .bg-white {
            transform: translateY(100%);
            transition: transform 0.3s ease-out;
        }
        #fab-modal .bg-white.translate-y-0 {
            transform: translateY(0);
        }

        /* Swipe-to-delete styles */
        .swipe-container {
            position: relative;
            overflow: hidden; /* Hide the delete button initially */
            touch-action: pan-y; /* Allow vertical scroll while capturing horizontal swipe */
        }
        .request-card-content {
            position: relative; /* Needed for z-index */
            z-index: 1;
            transition: transform 300ms ease-out;
            background-color: white; /* Ensure it has a background to cover delete */
            width: 100%; /* Take full width of container */
        }
        .delete-action {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            z-index: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #ef4444; /* red-500 */
            color: white;
            width: 80px; /* Adjust width as needed */
            /* Initially hidden by overflow and content's position */
            transform: translateX(100%); /* Start off-screen */
            transition: transform 300ms ease-out;
        }
         .swipe-container.is-swiped-open .request-card-content {
             transform: translateX(-80px); /* Match delete action width */
         }
         .swipe-container.is-swiped-open .delete-action {
             transform: translateX(0);
         }

        /* Updated Tab Styles */
        .tab-button-underline {
             /* Base styles for the button text */
             /* @apply px-3 py-2 text-sm font-medium focus:outline-none cursor-pointer transition-colors duration-200 ease-in-out border-b-2 border-transparent; */
             padding-left: 0.75rem; /* px-3 */
             padding-right: 0.75rem; /* px-3 */
             padding-top: 0.5rem; /* py-2 */
             padding-bottom: 0.5rem; /* py-2 */
             font-size: 0.875rem; /* text-sm */
             line-height: 1.25rem; /* text-sm */
             font-weight: 500; /* font-medium */
             outline: 2px solid transparent; /* focus:outline-none */
             outline-offset: 2px; /* focus:outline-none */
             cursor: pointer; /* cursor-pointer */
             transition-property: color, border-color; /* transition-colors */
             transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); /* ease-in-out */
             transition-duration: 200ms; /* duration-200 */
             border-bottom-width: 2px; /* border-b-2 */
             border-bottom-color: transparent; /* border-transparent */
        }
        .tab-button-underline.active {
             /* Styles for the active button text */
             /* @apply text-gray-900 border-gray-900 font-semibold; */
             color: #111827; /* text-gray-900 */
             border-bottom-color: #111827; /* border-gray-900 */
             font-weight: 600; /* font-semibold */
         }
         .tab-button-underline.inactive {
             /* Styles for the inactive button text */
             /* @apply text-gray-500 hover:text-gray-700 hover:border-gray-300; */
             color: #6B7280; /* text-gray-500 */
         }
         .tab-button-underline.inactive:hover {
             color: #374151; /* hover:text-gray-700 */
             border-bottom-color: #D1D5DB; /* hover:border-gray-300 */
         }
        /* Styles for the moving indicator (Alternative if not using border on button) */
        /* #tab-indicator { */
        /*     @apply absolute bottom-0 h-0.5 bg-gray-900 transition-all duration-300 ease-in-out; */
        /* } */

        /* Gradient for bottom navigation */
        .nav-gradient-bg {
            background: linear-gradient(to top, rgba(226, 234, 238, 1) 0%, rgba(226, 234, 238, 0.8) 50%, rgba(226, 234, 238, 0) 100%);
            /* height: 120px; /* Adjust height as needed */
        }
        /* Stacked card hint */
        .reviewed-card-stack::after {
            content: '';
            position: absolute;
            left: 4px;
            right: 4px;
            bottom: -4px; /* Position below the main card */
            height: 8px; /* Height of the hint */
            background-color: #f9fafb; /* Slightly off-white */
            border-radius: 0 0 0.5rem 0.5rem; /* Match card rounding */
            border: 1px solid #e5e7eb; /* Subtle border */
            z-index: -1; /* Place behind the main card */
            box-shadow: 0 2px 4px -1px rgba(0,0,0,0.05);
        }

        /* Ensure body takes full height and no scroll bars */
        html, body {
             height: 100%;
             overflow: hidden; /* Prevent main scroll */
             margin: 0;
             padding: 0;
             /* Background now applied to content area or header wrapper */
             /* background-color: #E2EAEE; */ 
        }
        .main-content-area {
            height: calc(100vh - 80px - 90px); /* Adjust based on header and nav height */
            overflow-y: auto; /* Enable scroll ONLY for this area */
        }
        /* Simple placeholder for images */
        .placeholder-image {
            background-color: #d1d5db; /* gray-300 */
            display: flex;
            align-items: center;
            justify-content: center;
            color: #9ca3af; /* gray-400 */
            font-size: 0.75rem;
        }

        /*     @apply absolute bottom-0 h-0.5 bg-gray-900 transition-all duration-300 ease-in-out; */
        /* } */

        /* --- NEW Tab Styles --- */
        .tab-button {
            /* Common styles for both active and inactive */
             transition-property: color, border-color;
             transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
             transition-duration: 150ms;
        }
        .tab-button.active {
            /* Styles for the active tab */
            border-bottom-color: #111827; /* border-gray-900 */
            color: #111827; /* text-gray-900 */
            font-weight: 500; /* Changed from 600 */
        }

        .tab-button.inactive {
            /* Styles for the inactive tab */
            border-bottom-color: transparent;
            color: #6B7280; /* text-gray-500 */
            font-weight: 500; /* font-medium (or default) */
        }
        .tab-button.inactive:hover {
             border-bottom-color: #D1D5DB; /* hover:border-gray-300 */
             color: #374151; /* hover:text-gray-700 */
        }
        /* --- END NEW Tab Styles --- */

        /* --- NEW Tab Content Animation Styles --- */
        .content-pane {
            transition: opacity 0.3s ease-in-out;
        }
        
        .content-pane-visible {
            opacity: 1;
            display: block;
        }
        
        .content-pane-hidden {
            opacity: 0;
            display: none;
        }

        .tab-button-underline {
            position: relative;
            transition: all 0.3s ease;
        }

        .tab-button-underline::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: #3B82F6;
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .tab-button-underline.active::after {
            transform: scaleX(1);
        }

        .tab-button-underline.active {
            color: #3B82F6;
        }

        .tab-button-underline.inactive {
            color: #6B7280;
        }
        /* --- END Tab Content Animation Styles --- */

        /* --- NEW Bottom Nav Styles --- */
        .bottom-nav-item.active > span:first-child {
            /* Icon background for active item */
            background-color: rgba(0, 78, 112, 0.12); /* #004E70 at 12% opacity */
        }
        .bottom-nav-item span:last-child { /* Set text color for ALL items */
            color: #00374F; /* Custom nav-text color */
        }
        /* Remove separate rules for active/inactive text color */
        /* .bottom-nav-item.active span:last-child { ... } */
        /* .bottom-nav-item.inactive span:last-child { ... } */
        /* .bottom-nav-item.inactive:hover span:last-child { ... } */
        
        /* Ensure icons use appropriate active/inactive color */
        .bottom-nav-item.active svg {
             fill: #004E70; /* Custom nav-active-icon color */
        }
         .bottom-nav-item.inactive svg {
             fill: #7EAABD; /* Custom nav-passive-icon color */
        }
        /* Remove generic fill:currentColor rule */
        /* .bottom-nav-item svg { fill: currentColor; } */

         /* Add padding for safe areas (e.g., iPhone notch/home bar) */
         .pt-safe-top { padding-top: env(safe-area-inset-top); }
         .pb-safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
        /* --- END Bottom Nav Styles --- */

        /* --- NEW Content Fade Effect --- */
        .content-fade-bottom {
            mask-image: linear-gradient(to bottom, black calc(100% - 70px), transparent 100%);
            -webkit-mask-image: linear-gradient(to bottom, black calc(100% - 70px), transparent 100%);
        }
        /* --- END Content Fade Effect --- */

        /* Gradient for bottom navigation - REMOVED as using gradient class */
        /* .nav-gradient-bg { ... } */

        /* Tab switching classes */
        .content-pane {
            display: block;
            opacity: 1;
            transition: opacity 0.3s ease-in-out;
        }
        
        .content-pane-hidden {
            display: none;
            opacity: 0;
        }
        
        .content-pane-visible {
            display: block;
            opacity: 1;
        }

        .tab-button-underline {
            position: relative;
            transition: all 0.3s ease;
        }

        .tab-button-underline::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: #3B82F6;
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .tab-button-underline.active {
            color: #3B82F6;
        }

        .tab-button-underline.active::after {
            transform: scaleX(1);
        }

        .tab-button-underline.inactive {
            color: #6B7280;
        }

        /* Update main container styles */
        .main-container {
            background-color: #DFEBF0;
            min-height: 100vh;
        }
        
        .top-section {
            background-color: white;
            border-bottom: 1px solid #E5E7EB;
        }
        
        .content-section {
            background-color: #DFEBF0;
            padding: 1rem;
            padding-bottom: 5rem; /* Added more padding at the bottom */
        }
        
        .card {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
            padding: 1rem;
        }
        
        .bottom-nav {
            background-color: white;
            border-top: 1px solid #E5E7EB;
            padding: 0.75rem;
        }
        
        .bottom-nav-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            padding: 0.5rem;
            color: #6B7280;
            transition: color 0.2s;
        }
        
        .bottom-nav-button.active {
            color: #3B82F6;
        }
        
        .bottom-nav-button svg {
            width: 1.5rem;
            height: 1.5rem;
        }
        
        .bottom-nav-button span {
            font-size: 0.75rem;
        }
    </style>
</head>
<body class="font-sans text-gray-900 h-full flex flex-col">
    <div class="main-container flex flex-col h-screen">
        <!-- Top Section -->
        <div class="top-section">
            <!-- Profile Section -->
            <div class="px-4 py-3 flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <img src="https://img.freepik.com/free-photo/woman-doctor-wearing-lab-coat-with-stethoscope-isolated_1303-29791.jpg" alt="Doctor Jane" class="w-12 h-12 rounded-full object-cover">
                    <div>
                        <h1 class="text-xl font-semibold text-gray-900">Doctor Jane</h1>
                        <p class="text-gray-500">Procurement</p>
                    </div>
                </div>
                <div class="flex items-center space-x-2">
                    <!-- <button id="chat-button" class="p-2">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-blue-900">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.625 9.75a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 01.778-.332 48.294 48.294 0 005.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z" />
                        </svg>
                    </button> -->
                </div>
            </div>

            <!-- Navigation Tabs -->
            <div class="border-b border-gray-200">
                <nav class="flex space-x-4 px-4" aria-label="Tabs">
                    <button class="tab-button-underline active flex items-center space-x-2 py-3" data-tab-button="feedback-content">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z" />
                        </svg>
                        <span>Feedback</span>
                    </button>
                    <button class="tab-button-underline inactive flex items-center space-x-2 py-3" data-tab-button="requests-content">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0118 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3l1.5 1.5 3-3.75" />
                        </svg>
                        <div class="flex items-center">
                            <span>Requests</span>
                            <span class="ml-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center">1</span>
                        </div>
                    </button>
                    <button class="tab-button-underline inactive flex items-center space-x-2 py-3" data-tab-button="inquiry-content">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" />
                        </svg>
                        <div class="flex items-center">
                            <span>Survey</span>
                            <span class="ml-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center">2</span>
                        </div>
                    </button>
                </nav>
            </div>
        </div>

        <!-- Content Section -->
        <div class="content-section flex-1 overflow-y-auto">
            <!-- Feedback Content Pane -->
            <div class="content-pane content-pane-visible" id="feedback-content" data-tab-content="feedback-content">
                <div class="space-y-4">
                    <div class="card p-4">
                        <!-- Product Info Row -->
                        <div class="flex items-center space-x-4">
                            <div class="w-20 h-20 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0">
                                <img src="https://www.gloves.com/cdn/shop/articles/maskmedicare-shop-zCsup0tF-q4-unsplash.jpg?v=1673613431" alt="Gloves - Size M" class="w-full h-full object-cover">
                            </div>
                            <div class="flex-1">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-lg font-medium text-gray-900">Gloves - Size M</h3>
                                        <p class="text-gray-500">MediSafe Supplies</p>
                                    </div>
                                    <span class="text-xs font-medium px-2 py-1 rounded-full bg-red-100 text-red-700">Critical</span>
                                </div>
                            </div>
                        </div>

                        <div class="h-px bg-gray-200 my-4"></div>

                        <!-- Feedback Row -->
                        <div>
                            <div class="flex items-center mb-2">
                                <div class="flex">
                                    <svg class="w-5 h-5 text-red-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                    <svg class="w-5 h-5 text-gray-300" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                    <svg class="w-5 h-5 text-gray-300" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                    <svg class="w-5 h-5 text-gray-300" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                    <svg class="w-5 h-5 text-gray-300" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                </div>
                                <span class="ml-auto text-sm text-gray-500">2 days ago</span>
                            </div>
                            <p class="text-gray-700">"Critical safety issue: Gloves frequently tear during use, posing infection risk. Immediate replacement needed."</p>
                        </div>

                        <div class="h-px bg-gray-200 my-4"></div>

                        <!-- Status Row -->
                        <div class="bg-blue-50 rounded-lg p-4">
                            <div class="flex justify-between items-center mb-1">
                                <span class="text-blue-600 font-medium">Procurement Response</span>
                                <span class="text-sm text-blue-500">1 day ago</span>
                            </div>
                            <p class="text-blue-600">"Investigating alternative suppliers. Temporary stock available."</p>
                        </div>
                    </div>

                    <!-- Second Card -->
                    <div class="card p-4">
                        <!-- Product Info Row -->
                        <div class="flex items-center space-x-4">
                            <div class="w-20 h-20 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0">
                                <img src="https://hdbrows.com/shop/pro/media/catalog/product/cache/83883c3d58d0958e9d4c7e2cf62df9ac/t/y/type-iir-mask.jpg" alt="Masks - Type IIR" class="w-full h-full object-cover">
                            </div>
                            <div class="flex-1">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-lg font-medium text-gray-900">Masks - Type IIR</h3>
                                        <p class="text-gray-500">HealthGuard Medical</p>
                                    </div>
                                    <span class="text-xs font-medium px-2 py-1 rounded-full bg-blue-100 text-blue-700">Suggestion</span>
                                </div>
                            </div>
                        </div>

                        <div class="h-px bg-gray-200 my-4"></div>

                        <!-- Feedback Row -->
                        <div>
                            <div class="flex items-center mb-2">
                                <div class="flex">
                                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                </div>
                                <span class="ml-auto text-sm text-gray-500">3 days ago</span>
                            </div>
                            <p class="text-gray-700">"Excellent filtration and comfortable fit. Perfect for long procedures."</p>
                        </div>

                        <div class="h-px bg-gray-200 my-4"></div>

                        <!-- Status Row -->
                        <div>
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                Pending Response
                            </span>
                        </div>
                    </div>

                    <!-- Third Card -->
                    <div class="card p-4">
                        <!-- Product Info Row -->
                        <div class="flex items-center space-x-4">
                            <div class="w-20 h-20 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0">
                                <img src="https://cdn.webshopapp.com/shops/308248/files/472938159/325x325x2/medipharchem-surgical-scissors-st-st-curved.jpg" alt="Surgical Scissors" class="w-full h-full object-cover">
                            </div>
                            <div>
                                <h3 class="text-lg font-medium text-gray-900">Surgical Scissors</h3>
                                <p class="text-gray-500">Precision Surgical Tools</p>
                            </div>
                        </div>

                        <div class="h-px bg-gray-200 my-4"></div>

                        <!-- Feedback Row -->
                        <div>
                            <div class="flex items-center mb-2">
                                <div class="flex">
                                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                    <svg class="w-5 h-5 text-gray-300" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                    <svg class="w-5 h-5 text-gray-300" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                </div>
                                <span class="ml-auto text-sm text-gray-500">4 days ago</span>
                            </div>
                            <p class="text-gray-700">"Quality has declined, needs more frequent replacement."</p>
                        </div>

                        <div class="h-px bg-gray-200 my-4"></div>

                        <!-- Status Row -->
                        <div>
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                New
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Requests Content Pane -->
            <div class="content-pane content-pane-hidden" id="requests-content" data-tab-content="requests-content">
                <div class="space-y-4">
                    <!-- Active Request Card -->
                    <div class="card p-4 border-l-4 border-red-500">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900">Surgical Drapes - Emergency Order</h3>
                                <p class="text-sm text-gray-500">Request #SD-2024-03-21-001</p>
                            </div>
                            <span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">Urgent</span>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <p class="text-sm font-medium text-gray-500">Status</p>
                                <p class="text-sm text-gray-900">Processing</p>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Expected Delivery</p>
                                <p class="text-sm text-gray-900">March 22, 2024 (Express)</p>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Requested Quantity</p>
                                <p class="text-sm text-gray-900">500 units</p>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Preferred Brand</p>
                                <p class="text-sm text-gray-900">Medline Sterile Surgical Drapes</p>
                            </div>
                        </div>

                        <div class="bg-gray-50 rounded-lg p-3">
                            <p class="text-sm font-medium text-gray-500">Reason for Request</p>
                            <p class="text-sm text-gray-900 mt-1">Current stock near depletion, increased surgical procedures scheduled</p>
                        </div>
                    </div>

                    <!-- Second Active Request Card -->
                    <div class="card p-4 border-l-4 border-yellow-500">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900">Anesthesia Machine Parts</h3>
                                <p class="text-sm text-gray-500">Request #AM-2024-03-20-002</p>
                            </div>
                            <span class="px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">In Progress</span>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <p class="text-sm font-medium text-gray-500">Status</p>
                                <p class="text-sm text-gray-900">Supplier Confirmed</p>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Expected Delivery</p>
                                <p class="text-sm text-gray-900">March 25, 2024</p>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Requested Quantity</p>
                                <p class="text-sm text-gray-900">3 sets</p>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Preferred Brand</p>
                                <p class="text-sm text-gray-900">Dräger Original Parts</p>
                            </div>
                        </div>

                        <div class="bg-gray-50 rounded-lg p-3">
                            <p class="text-sm font-medium text-gray-500">Reason for Request</p>
                            <p class="text-sm text-gray-900 mt-1">Preventive maintenance requirement, backup parts needed</p>
                        </div>
                    </div>

                    <!-- Completed Request Card -->
                    <div class="card p-4 border-l-4 border-green-500">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900">Disposable Syringes</h3>
                                <p class="text-sm text-gray-500">Request #DS-2024-03-15-003</p>
                            </div>
                            <span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">Completed</span>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <p class="text-sm font-medium text-gray-500">Delivery Date</p>
                                <p class="text-sm text-gray-900">March 20, 2024</p>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Monthly Usage</p>
                                <p class="text-sm text-gray-900">~800 units</p>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Requested Quantity</p>
                                <p class="text-sm text-gray-900">1000 units</p>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Preferred Brand</p>
                                <p class="text-sm text-gray-900">BD Medical</p>
                            </div>
                        </div>

                        <div class="bg-gray-50 rounded-lg p-3 mb-4">
                            <p class="text-sm font-medium text-gray-500">Reason for Request</p>
                            <p class="text-sm text-gray-900 mt-1">Regular inventory replenishment</p>
                        </div>

                        <div class="bg-blue-50 rounded-lg p-3">
                            <div class="flex items-center justify-between mb-1">
                                <span class="text-sm font-medium text-blue-600">Procurement Note</span>
                                <span class="text-xs text-blue-500">March 20, 2024</span>
                            </div>
                            <p class="text-sm text-blue-600">Delivered to Supply Room 2B. Additional stock available if needed. Next regular delivery scheduled for April 15.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inquiry Content Pane -->
            <div class="content-pane content-pane-hidden" id="inquiry-content" data-tab-content="inquiry-content">
                <div class="space-y-4">
                    <!-- First Product Rating Card (Unrated) -->
                    <div class="card p-4">
                        <!-- Product Info Row -->
                        <div class="flex items-center space-x-4">
                            <div class="w-20 h-20 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0">
                                <img src="https://www.gloves.com/cdn/shop/articles/maskmedicare-shop-zCsup0tF-q4-unsplash.jpg?v=1673613431" alt="Surgical Gloves" class="w-full h-full object-cover">
                            </div>
                            <div class="flex-1">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-lg font-medium text-gray-900">Surgical Gloves - Size M</h3>
                                        <p class="text-gray-500">MediSafe Supplies</p>
                                    </div>
                                    <span class="text-xs font-medium px-2 py-1 rounded-full bg-violet-100 text-violet-700">New</span>
                                </div>
                            </div>
                        </div>

                        <div class="h-px bg-gray-200 my-4"></div>

                        <!-- Action Row -->
                        <button class="w-full px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded-full hover:bg-gray-800 transition-colors duration-200 flex items-center justify-center space-x-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                            </svg>
                            <span>Rate Product</span>
                        </button>
                    </div>

                    <!-- Second Product Rating Card (Already Rated) -->
                    <div class="card p-4">
                        <!-- Product Info Row -->
                        <div class="flex items-center space-x-4">
                            <div class="w-20 h-20 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0">
                                <img src="https://hdbrows.com/shop/pro/media/catalog/product/cache/83883c3d58d0958e9d4c7e2cf62df9ac/t/y/type-iir-mask.jpg" alt="Surgical Masks" class="w-full h-full object-cover">
                            </div>
                            <div class="flex-1">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-lg font-medium text-gray-900">Surgical Masks - Type IIR</h3>
                                        <p class="text-gray-500">HealthGuard Medical</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="h-px bg-gray-200 my-4"></div>

                        <!-- Rating Row -->
                        <div>
                            <div class="flex items-center mb-2">
                                <div class="flex">
                                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                </div>
                                <span class="ml-auto text-sm text-gray-500">2 days ago</span>
                            </div>
                            <p class="text-gray-700">"Excellent filtration and comfortable fit. Perfect for long procedures."</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

   
    <!-- Floating Action Buttons Island -->
    <div class="fixed bottom-6 left-1/2 transform -translate-x-1/2 z-[100]">
        <div class="flex items-center bg-white rounded-full shadow-lg px-6 py-2">
            <!-- Dictate Button -->
            <button id="dictate-button" class="w-12 h-12 text-gray-600 rounded-full flex items-center justify-center hover:bg-gray-50 transition-colors duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 01-3-3V4.5a3 3 0 116 0v8.25a3 3 0 01-3 3z" />
                </svg>
            </button>
            
             <!-- Main Plus Button -->
             <div class="px-3">
                <button id="fab-button" class="w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-blue-700 transition-colors duration-200">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                    </svg>
                </button>
            </div>
            
            <!-- Camera Button -->
            <button id="camera-button" class="w-12 h-12 text-gray-600 rounded-full flex items-center justify-center hover:bg-gray-50 transition-colors duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z" />
                </svg>
            </button>
        </div>
    </div>

    <!-- Dictation Container -->
    <div id="dictate-overlay" class="fixed inset-0 bg-black bg-opacity-90 z-[200] hidden items-center justify-center">
        <div class="flex flex-col items-center justify-center w-full h-full">
            <div id="speech-indicator" class="w-24 h-24 bg-blue-600 rounded-full mb-6 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
                </svg>
            </div>
            <div id="dictation-status" class="text-white text-xl mb-6 text-center max-w-[80%]"></div>
            <div id="interim-transcript" class="text-white text-xl mb-6 text-center max-w-[80%]"></div>
            
            <!-- Action Buttons (hidden initially) -->
            <div id="dictation-actions" class="hidden flex flex-col gap-3 mb-6 w-64">
                <a href="add-feedback.html" id="create-feedback-link" class="w-full px-6 py-3 bg-blue-600 text-white font-medium rounded-full flex items-center justify-center gap-2 hover:bg-blue-700 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z" />
                    </svg>
                    Create Feedback
                </a>
                <a href="request-product.html" class="w-full px-6 py-3 bg-white text-gray-900 font-medium rounded-full flex items-center justify-center gap-2 hover:bg-gray-100 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0118 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3l1.5 1.5 3-3.75" />
                    </svg>
                    Request Product
                </a>
            </div>

            <div class="flex gap-4">
                <button id="start-dictation" class="px-6 py-3 bg-white text-black font-medium rounded-full flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                    </svg>
                    Start
                </button>
                <button id="stop-dictation" class="hidden px-6 py-3 bg-red-500 text-white font-medium rounded-full flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z" clip-rule="evenodd" />
                    </svg>
                    Stop
                </button>
                <button id="cancel-dictation" class="px-6 py-3 bg-white text-black font-medium rounded-full flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                    </svg>
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Camera Container -->
    <div id="camera-overlay" class="fixed inset-0 bg-black bg-opacity-90 z-[200] hidden">
        <!-- Camera Preview (visible during capture) -->
        <video id="camera-view" class="w-full h-full object-cover" autoplay playsinline></video>
        
        <!-- Photo Preview (hidden initially, shown after capture) -->
        <div id="photo-review-container" class="hidden w-full h-full flex flex-col items-center justify-center">
            <img id="captured-photo-preview" class="max-w-full max-h-[70%] object-contain mb-6" alt="Captured photo">
            <div class="flex flex-col gap-3 w-64 px-4">
                <a href="add-feedback.html?photoSource=localStorage" id="add-feedback-photo-btn" class="w-full px-6 py-3 bg-blue-600 text-white font-medium rounded-full flex items-center justify-center gap-2 hover:bg-blue-700 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z" />
                    </svg>
                    Add Feedback
                </a>
                <a href="request-product.html" id="request-product-photo-btn" class="w-full px-6 py-3 bg-white text-gray-900 font-medium rounded-full flex items-center justify-center gap-2 hover:bg-gray-100 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0118 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3l1.5 1.5 3-3.75" />
                    </svg>
                    Request Product
                </a>
                <div class="flex justify-center gap-4 mt-2">
                    <button id="retake-photo" class="p-3 bg-white text-gray-900 rounded-full hover:bg-gray-100 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                        </svg>
                    </button>
                    <button id="cancel-review" class="p-3 bg-white text-gray-900 rounded-full hover:bg-gray-100 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Camera Controls (only for capture phase) -->
        <div id="camera-controls" class="fixed bottom-6 left-0 right-0 flex justify-center gap-4">
            <button id="capture-photo" class="px-6 py-3 bg-white text-black font-medium rounded-full flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                Capture
            </button>
            <button id="cancel-photo" class="px-6 py-3 bg-white text-black font-medium rounded-full flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
                Cancel
            </button>
        </div>
    </div>

    <!-- Modal Dialog -->
    <div id="fab-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-end justify-center z-[100] hidden">
        <div class="bg-white w-full max-w-md rounded-t-2xl p-4 transform translate-y-full transition-transform duration-300 ease-out">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-gray-900">Quick Actions</h3>
                <button id="close-modal" class="text-gray-500 hover:text-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="space-y-3">
                <button class="w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-blue-600">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z" />
                    </svg>
                    <span class="text-gray-900">Add Feedback</span>
                </button>
                <a href="request-product.html" class="w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 no-underline">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-blue-600">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0118 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3l1.5 1.5 3-3.75" />
                    </svg>
                    <span class="text-gray-900">Request Product</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Add script tag for JavaScript -->
    <script type="module">
        import { getFeedback, getProductRequests } from './db-utils.js';
        import supabase from './supabase.js';

        // Product image mapping
        const productImages = {
            'Digital Thermometer': 'https://cdn.webshopapp.com/shops/308248/files/472938159/325x325x2/medipharchem-surgical-scissors-st-st-curved.jpg',
            'Gloves - Size M': 'https://www.gloves.com/cdn/shop/articles/maskmedicare-shop-zCsup0tF-q4-unsplash.jpg?v=1673613431',
            'Synguard Nitrile Exam Gloves': 'https://m.media-amazon.com/images/I/6166OEAwJ9L._AC_SX679_.jpg',
            'Masks - Type IIR': 'https://hdbrows.com/shop/pro/media/catalog/product/cache/83883c3d58d0958e9d4c7e2cf62df9ac/t/y/type-iir-mask.jpg',
            'Surgical Scissors': 'https://cdn.webshopapp.com/shops/308248/files/472938159/325x325x2/medipharchem-surgical-scissors-st-st-curved.jpg',
            'Surgical Drapes': 'https://www.medicalexpo.com/prod/medline/product-68697-902857.html',
            'Anesthesia Machine Parts': 'https://www.dremed.com/catalog/images/1583259135_mrii-hero-mobile.png',
            'Disposable Syringes': 'https://cdn.shopify.com/s/files/1/0069/9584/7365/products/60cc-syringes_800x.jpg'
        };

        // Function to create a feedback card
        function createFeedbackCard(feedback) {
            const timestamp = new Date(feedback.timestamp || new Date());
            const timeAgo = Math.floor((new Date() - timestamp) / (1000 * 60 * 60 * 24)); // days ago
            
            // Get product image or fallback to placeholder
            const productImage = productImages[feedback.product] || 'https://via.placeholder.com/80';
            
            return `
                <div class="card p-4">
                    <!-- Product Info Row -->
                    <div class="flex items-center space-x-4">
                        <div class="w-20 h-20 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0">
                            <img src="${productImage}" alt="${feedback.product}" class="w-full h-full object-cover">
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="text-lg font-medium text-gray-900">${feedback.product}</h3>
                                    <p class="text-gray-500">Medical Supplies</p>
                                </div>
                                
                            </div>
                        </div>
                    </div>

                    <div class="h-px bg-gray-200 my-4"></div>

                    <!-- Feedback Row -->
                    <div>
                        <div class="flex items-center mb-2">
                            <div class="flex">
                                ${Array(parseInt(feedback.rating) || 0).fill().map(() => `
                                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                `).join('')}
                                ${Array(5 - (parseInt(feedback.rating) || 0)).fill().map(() => `
                                    <svg class="w-5 h-5 text-gray-300" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                `).join('')}
                            </div>
                            <span class="ml-auto text-sm text-gray-500">${timeAgo} days ago</span>
                        </div>
                        <p class="text-gray-700">"${feedback.text}"</p>
                    </div>
                </div>
            `;
        }

        // Function to create a request card
        function createRequestCard(request) {
            const timestamp = new Date(request.timestamp || new Date());
            const timeAgo = Math.floor((new Date() - timestamp) / (1000 * 60 * 60 * 24)); // days ago
            
            // Define status based on request status
            let status = request.status || 'New';
            let statusClass = '';
            
            if (status === 'Completed') {
                statusClass = 'border-l-4 border-green-500';
            } else if (status === 'Processing' || status === 'In Progress') {
                statusClass = 'border-l-4 border-yellow-500';
            } else if (request.priority === 'Urgent') {
                statusClass = 'border-l-4 border-red-500';
                status = 'Processing';
            } else {
                // Default border for new/no status requests
                statusClass = 'border-l-4 border-blue-500';
                status = 'New';
            }
            
            // Format date for expected delivery
            const expectedDelivery = request.expected_delivery 
                ? new Date(request.expected_delivery).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })
                : `${new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })} (Estimated)`;
            
            const deliveryType = request.priority === 'Urgent' ? ' (Express)' : '';
            
            return `
                <div class="card p-4 ${statusClass}">
                    <div class="flex justify-between items-start mb-3">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900">${request.product_name || 'Product Request'}</h3>
                            <p class="text-sm text-gray-500">Request #${request.request_id || `REQ-${new Date().getTime().toString().substr(-8)}`}</p>
                        </div>
                        <span class="px-2 py-1 text-xs font-semibold rounded-full ${request.priority === 'Urgent' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'}">
                            ${request.priority || 'Standard'}
                        </span>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <p class="text-sm font-medium text-gray-500">Status</p>
                            <p class="text-sm text-gray-900">${status}</p>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-gray-500">Expected Delivery</p>
                            <p class="text-sm text-gray-900">${expectedDelivery}${deliveryType}</p>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-gray-500">Requested Quantity</p>
                            <p class="text-sm text-gray-900">${request.quantity || '1'} ${request.unit || 'units'}</p>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-gray-500">Preferred Brand</p>
                            <p class="text-sm text-gray-900">${request.preferred_brand || 'Any'}</p>
                        </div>
                    </div>

                    <div class="bg-gray-50 rounded-lg p-3">
                        <p class="text-sm font-medium text-gray-500">Reason for Request</p>
                        <p class="text-sm text-gray-900 mt-1">${request.reason || 'Standard restock'}</p>
                    </div>
                </div>
            `;
        }

        // Function to load and display feedback
        async function loadFeedback() {
            try {
                const feedbackContainer = document.querySelector('#feedback-content .space-y-4');
                const feedback = await getFeedback();
                
                if (feedback && feedback.length > 0) {
                    // Create a document fragment to hold the new feedback cards
                    const fragment = document.createDocumentFragment();
                    const tempDiv = document.createElement('div');
                    
                    // Add each feedback item
                    feedback.forEach(item => {
                        tempDiv.innerHTML = createFeedbackCard(item);
                        fragment.appendChild(tempDiv.firstElementChild);
                    });
                    
                    // Insert the new feedback at the beginning of the container
                    feedbackContainer.insertBefore(fragment, feedbackContainer.firstChild);
                }
            } catch (error) {
                console.error('Error loading feedback:', error);
            }
        }

        // Function to load and display requests
        async function loadRequests() {
            console.log('Loading requests from Supabase - simplified approach');
            try {
                // Direct fetch from Supabase
                const { data, error } = await supabase
                    .from('product_requests')
                    .select('*')
                    .order('timestamp', { ascending: false });
                
                if (error) {
                    console.error('Error fetching requests:', error);
                    return;
                }
                
                console.log('Successfully fetched requests:', data);
                
                if (data && data.length > 0) {
                    const requestsContainer = document.querySelector('#requests-content .space-y-4');
                    // Create a document fragment to hold the new request cards
                    const fragment = document.createDocumentFragment();
                    const tempDiv = document.createElement('div');
                    
                    // Add each request item
                    data.forEach(item => {
                        console.log('Processing request:', item.product_name || 'Unknown product');
                        tempDiv.innerHTML = createRequestCard(item);
                        fragment.appendChild(tempDiv.firstElementChild);
                    });
                    
                    // Insert the requests at the top of the container
                    if (requestsContainer.firstChild) {
                        requestsContainer.insertBefore(fragment, requestsContainer.firstChild);
                    } else {
                        requestsContainer.appendChild(fragment);
                    }
                }
            } catch (error) {
                console.error('Error in loadRequests:', error);
            }
        }

        // Load feedback and requests when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            loadFeedback();
            loadRequests();
            
            // Update notification badges
            updateRequestNotificationBadge();
        });
        
        // Function to update the notification badge on the Requests tab
        async function updateRequestNotificationBadge() {
            console.log('Updating request notification badge - simplified approach');
            try {
                // Direct fetch from Supabase
                const { data, error } = await supabase
                    .from('product_requests')
                    .select('*');
                    
                if (error) {
                    console.error('Error fetching request count:', error);
                    return;
                }
                
                console.log('Got requests for badge:', data ? data.length : 0);
                
                // Count requests that need attention (not completed)
                const pendingRequests = data.filter(req => 
                    req.status !== 'Completed' && req.status !== 'Delivered'
                );
                
                console.log('Pending requests count:', pendingRequests.length);
                
                // Update the badge in the Requests tab
                const requestsBadge = document.querySelector('[data-tab-button="requests-content"] .rounded-full');
                if (requestsBadge) {
                    if (pendingRequests.length > 0) {
                        requestsBadge.textContent = pendingRequests.length;
                        requestsBadge.classList.remove('hidden');
                    } else {
                        requestsBadge.classList.add('hidden');
                    }
                }
            } catch (error) {
                console.error('Error updating request badge:', error);
            }
        }
    </script>
    <script type="module" src="script.js"></script>

    <!-- Add script at the bottom of the body to expose functions globally -->
    <script>
        // Expose the functions globally for inline event handlers
        function capturePhoto() {
            // Find the capturePhoto function from the script.js and call it
            const event = new Event('click');
            document.getElementById('capture-photo').dispatchEvent(event);
        }
        
        function stopCamera() {
            // Find the stopCamera function from the script.js and call it
            const event = new Event('click');
            document.getElementById('cancel-photo').dispatchEvent(event);
        }

        // Expose the retake and cancel functionality for the review buttons
        document.addEventListener('DOMContentLoaded', function() {
            // Retake photo button
            const retakePhotoBtn = document.getElementById('retake-photo');
            if (retakePhotoBtn) {
                retakePhotoBtn.addEventListener('click', function() {
                    const photoReviewContainer = document.getElementById('photo-review-container');
                    const videoElement = document.getElementById('camera-view');
                    const cameraControls = document.getElementById('camera-controls');
                    
                    if (photoReviewContainer) {
                        photoReviewContainer.classList.add('hidden');
                    }
                    if (videoElement) {
                        videoElement.classList.remove('hidden');
                    }
                    if (cameraControls) {
                        cameraControls.classList.remove('hidden');
                    }
                    
                    // Reset the capturedImage data
                    window.capturedImage = null;
                });
            }
            
            // Cancel review button
            const cancelReviewBtn = document.getElementById('cancel-review');
            if (cancelReviewBtn) {
                cancelReviewBtn.addEventListener('click', function() {
                    const cameraOverlay = document.getElementById('camera-overlay');
                    if (cameraOverlay) {
                        cameraOverlay.classList.add('hidden');
                    }
                    
                    // Stop the camera stream
                    if (window.stream) {
                        window.stream.getTracks().forEach(track => track.stop());
                        window.stream = null;
                    }
                    
                    const videoElement = document.getElementById('camera-view');
                    if (videoElement) {
                        videoElement.srcObject = null;
                    }
                    
                    // Reset the capturedImage data
                    window.capturedImage = null;
                });
            }
        });
    </script>
</body>
</html> 